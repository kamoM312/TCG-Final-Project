<%- include('partials/header.ejs') %>

<body class="light-body">
  <nav class="navbar user-navbar">
    <div class="navbar-left">
      <h1 class="brand-title">ðŸ“˜ Vocab Notebook</h1>
    </div>
    <div class="navbar-right">
      <a href="/register" class="nav-link">Register</a>
    </div>
  </nav>

  <main class="container login-container">
    <% if (locals.error) { %>
      <div class="alert alert-error"><%= error %></div>
    <% } %>

    <form id="loginForm" class="login-box" method="POST" action="/login">
      <h2>Login</h2>

      <label for="email">Email</label>
      <input type="email" id="email" name="email" required placeholder="Enter your email" />

      <label for="password">Password</label>
      <input type="password" id="password" name="password" required placeholder="Enter your password" />

      <input type="submit" value="Log In" class="btn btn-primary" />
    </form>

    <p class="register-text">
      Don't have an account? <a href="/register">Register</a>
    </p>
  </main>

  <script>
    // Prevent auto-submit
    const form = document.getElementById('loginForm');
    let allowSubmit = false;

    form.addEventListener('submit', (e) => {
      if (!allowSubmit) e.preventDefault();
    });

    form.querySelector('input[type="submit"]').addEventListener('click', () => {
      allowSubmit = true;
    });

    form.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !allowSubmit) e.preventDefault();
    });
  </script>

