<%- include('partials/header.ejs') %>
  <title>Register</title>

</head>

<body class="light-body">
  <nav class="navbar user-navbar">
    <div class="navbar-left">
      <h1 class="brand-title">ðŸ“˜ Vocab Notebook</h1>
    </div>
    <div class="navbar-right">
      <a href="/" class="nav-link">Login</a>
    </div>
  </nav>

  <main class="container login-container">
    <% if (locals.error) { %>
      <div class="alert alert-error"><%= error %></div>
    <% } %>

    <form id="registerForm" class="login-box" method="POST" action="/register">
      <h2>Register</h2>

      <label for="name">Full Name</label>
      <input type="text" id="name" name="full_name" placeholder="Enter your full name" required />

      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="Enter your email" required />

      <label for="password">Password</label>
      <input type="password" id="password" name="password" placeholder="Create a password" required />

      <label for="retypePassword">Retype Password</label>
      <input type="password" id="retypePassword" name="retypePassword" placeholder="Confirm your password" required />

      <input type="submit" value="Register" class="btn btn-primary" />
    </form>

    <p class="register-text">
      Already have an account? <a href="/">Login</a>
    </p>
  </main>

  <script>
    const form = document.getElementById('registerForm');
    let allowSubmit = false;

    form.addEventListener('submit', (e) => {
      if (!allowSubmit) e.preventDefault();
    });

    form.querySelector('input[type="submit"]').addEventListener('click', () => {
      allowSubmit = true;
    });

    form.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !allowSubmit) e.preventDefault();
    });
  </script>